<script src="https://cdn.jsdelivr.net/npm/audiobuffer-to-wav@1.0.0/index.min.js"></script>

<div class="app">
  <div class="section section-waveform">
    <canvas id="waveform" width="560" height="120"></canvas>
  </div>

  <div class="section section-row">
    <div class="block">
      <button id="btnStartRec" class="btn-round-rec"></button>
      <button id="btnStopRec" class="btn-square-stop" disabled></button>
      <span id="status">Pronto</span>
    </div>
    <div class="block">
      <audio id="player" controls></audio>
      <button id="btnPlayProcessed" disabled>Play effetti</button>
    </div>
  </div>

  <div class="section knobs-grid">
    <div class="knob-wrapper">
      <div class="knob" data-target="gain" data-min="0" data-max="2" data-step="0.01"></div>
      <div class="knob-label">Volume</div>
      <div class="knob-value" id="gainVal">1.00</div>
      <input id="gain" type="range" min="0" max="2" step="0.01" value="1" hidden>
    </div>
    <div class="knob-wrapper">
      <div class="knob" data-target="pitch" data-min="0.5" data-max="2" data-step="0.01"></div>
      <div class="knob-label">Pitch</div>
      <div class="knob-value" id="pitchVal">1.00</div>
      <input id="pitch" type="range" min="0.5" max="2" step="0.01" value="1" hidden>
    </div>
    <div class="knob-wrapper">
      <div class="knob" data-target="lowpass" data-min="200" data-max="20000" data-step="1"></div>
      <div class="knob-label">Lowpass</div>
      <div class="knob-value" id="lowpassVal">20000</div>
      <input id="lowpass" type="range" min="200" max="20000" step="1" value="20000" hidden>
    </div>
    <div class="knob-wrapper">
      <div class="knob" data-target="highpass" data-min="10" data-max="5000" data-step="1"></div>
      <div class="knob-label">Highpass</div>
      <div class="knob-value" id="highpassVal">10</div>
      <input id="highpass" type="range" min="10" max="5000" step="1" value="10" hidden>
    </div>
    <div class="knob-wrapper">
      <div class="knob" data-target="delayTime" data-min="0" data-max="1" data-step="0.01"></div>
      <div class="knob-label">Delay</div>
      <div class="knob-value" id="delayTimeVal">0.00</div>
      <input id="delayTime" type="range" min="0" max="1" step="0.01" value="0" hidden>
    </div>
    <div class="knob-wrapper">
      <div class="knob" data-target="reverbMix" data-min="0" data-max="1" data-step="0.01"></div>
      <div class="knob-label">Reverb</div>
      <div class="knob-value" id="reverbMixVal">0.30</div>
      <input id="reverbMix" type="range" min="0" max="1" step="0.01" value="0.3" hidden>
    </div>
  </div>

  <div class="section preset-row">
    <button class="preset" data-preset="clean">Clean</button>
    <button class="preset" data-preset="phone">Phone</button>
    <button class="preset" data-preset="hall">Hall</button>
    <button class="preset" data-preset="lofi">Loâ€‘fi</button>
  </div>

  <div class="section download-row">
    <button id="btnDownloadWav" disabled>Download WAV mic</button>
    <button id="btnDownloadProcessedWav" disabled>Download WAV effetti</button>
  </div>
</div>